(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{1015:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return r(2132)}])},3851:function(e,t,r){"use strict";var a=r(5893);r(7294),r(1664),r(7498),r(9332),t.Z=function(){return(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"container-fluid p-3 mb-2 bg-dark-subtle text-dark text-center",children:"Inventory Controller"}),(0,a.jsxs)("div",{className:"Container-flex",children:[(0,a.jsx)("div",{className:"col-md"}),(0,a.jsx)("div",{className:"col-md text-center",children:(0,a.jsx)("img",{height:"125",width:"125",className:"mx-auto pb-2",src:"https://cdn.pixabay.com/photo/2021/11/22/22/53/inventory-6817561_1280.png"})}),(0,a.jsx)("div",{className:"col-md"})]})]})}},2132:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return T}});var a=r(5893),s=r(7294);function n(){return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"Container-fluid d-flex justify-content-between align-items-start",children:(0,a.jsx)("div",{className:"row",children:(0,a.jsxs)("div",{className:"col",children:["Select which customer's inventory to view by clicking the button below the customer name.",(0,a.jsx)("br",{}),(0,a.jsx)("br",{})]})})})})}r(292);var o=r(3851),l=r(5005),i=r(4184),c=r.n(i),d=r(6792),u=r(6611),m=r(9602);let h=s.forwardRef(({bsPrefix:e,className:t,variant:r,as:s="img",...n},o)=>{let l=(0,d.vE)(e,"card-img");return(0,a.jsx)(s,{ref:o,className:c()(r?`${l}-${r}`:l,t),...n})});h.displayName="CardImg";let p=s.createContext(null);p.displayName="CardHeaderContext";let x=s.forwardRef(({bsPrefix:e,className:t,as:r="div",...n},o)=>{let l=(0,d.vE)(e,"card-header"),i=(0,s.useMemo)(()=>({cardHeaderBsPrefix:l}),[l]);return(0,a.jsx)(p.Provider,{value:i,children:(0,a.jsx)(r,{ref:o,...n,className:c()(t,l)})})});x.displayName="CardHeader";let f=(0,m.Z)("h5"),g=(0,m.Z)("h6"),v=(0,u.Z)("card-body"),j=(0,u.Z)("card-title",{Component:f}),y=(0,u.Z)("card-subtitle",{Component:g}),w=(0,u.Z)("card-link",{Component:"a"}),N=(0,u.Z)("card-text",{Component:"p"}),b=(0,u.Z)("card-footer"),C=(0,u.Z)("card-img-overlay"),S=s.forwardRef(({bsPrefix:e,className:t,bg:r,text:s,border:n,body:o=!1,children:l,as:i="div",...u},m)=>{let h=(0,d.vE)(e,"card");return(0,a.jsx)(i,{ref:m,...u,className:c()(t,h,r&&`bg-${r}`,s&&`text-${s}`,n&&`border-${n}`),children:o?(0,a.jsx)(v,{children:l}):l})});S.displayName="Card";var Z=Object.assign(S,{Img:h,Title:j,Subtitle:y,Body:v,Link:w,Text:N,Header:x,Footer:b,ImgOverlay:C}),k=r(6154);async function E(){return(await k.Z.get("https://capstone-inventory-controller.ue.r.appspot.com/customer/")).data}var _=r(9332);function I(){let[e,t]=(0,s.useState)([]),r=(0,_.useRouter)();function n(e){r.push("/prod_list")}return(0,s.useEffect)(()=>{let e=async()=>{let e=await E();t(e)};return e(),()=>{}},[]),(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"Container-fluid",children:(0,a.jsx)("div",{className:"row",children:e.length>0?e.map((e,t)=>(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"col-md-3 m-3",children:(0,a.jsx)(Z,{style:{width:"12rem"},children:(0,a.jsxs)(Z.Body,{children:[(0,a.jsx)(Z.Title,{children:e.name}),(0,a.jsx)(Z.Text,{children:e.description}),(0,a.jsx)(l.Z,{variant:"primary",onClick:n,children:"View Inventory"})]},e.id)})},e.id)})):(0,a.jsx)("p",{children:"Please refresh page."})})})})}function T(){return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"container-fluid bg-light bg-darken-xl",children:(0,a.jsxs)("div",{className:"row text-center",children:[(0,a.jsx)("div",{className:"col-md-3"}),(0,a.jsxs)("div",{className:"col-md-6",children:[(0,a.jsx)(o.Z,{}),(0,a.jsx)(n,{}),(0,a.jsx)(I,{}),(0,a.jsx)("div",{className:"col-md-3"})]})]})})})}r(3907)},292:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var a=r(5893),s=r(9332),n=r(7294),o=r(7498),l=r(7311);function i(e){this.message=e}i.prototype=Error(),i.prototype.name="InvalidCharacterError";var c="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new i("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,a,s=0,n=0,o="";a=t.charAt(n++);~a&&(r=s%4?64*r+a:a,s++%4)&&(o+=String.fromCharCode(255&r>>(-2*s&6))))a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a);return o};function d(e){this.message=e}d.prototype=Error(),d.prototype.name="InvalidTokenError";var u=function(e,t){if("string"!=typeof e)throw new d("Invalid token specified");var r=!0===(t=t||{}).header?0:1;try{return JSON.parse(function(e){var t,r=e.replace(/-/g,"+").replace(/_/g,"/");switch(r.length%4){case 0:break;case 2:r+="==";break;case 3:r+="=";break;default:throw"Illegal base64url string!"}try{return t=r,decodeURIComponent(c(t).replace(/(.)/g,function(e,t){var r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}catch(e){return c(r)}}(e.split(".")[r]))}catch(e){throw new d("Invalid token specified: "+e.message)}},m=r(3851),h=function(){let e=(0,s.useRouter)(),{state:t,dispatch:r}=(0,o.j)(),[i,c]=(0,n.useState)(""),[d,h]=(0,n.useState)(""),[p,x]=(0,n.useState)("");return(0,a.jsxs)("div",{children:[(0,a.jsx)(m.Z,{}),(0,a.jsx)("div",{className:"flex",children:(0,a.jsxs)("form",{onSubmit:function(t){t.preventDefault(),l.Z.login(i,d,p).then(async t=>{console.log(t);let a=u(t.access);await r({currentUserToken:t.access,currentUser:a}),e.push("/dashboard")})},className:"mx-auto my-auto border-2 bg-mtgray",children:[(0,a.jsxs)("div",{className:"flex justify-between m-2 items-center space-x-2",children:[(0,a.jsx)("label",{htmlFor:"username",children:"Username:"}),(0,a.jsx)("input",{className:"border",type:"text",id:"username",name:"username",autoComplete:"current-username",onChange:e=>x(e.target.value),required:!0})]}),(0,a.jsxs)("div",{className:"flex justify-between m-2 items-center space-x-2",children:[(0,a.jsx)("label",{htmlFor:"email",children:"Email:"}),(0,a.jsx)("input",{className:"border",type:"text",id:"email",name:"email",onChange:e=>c(e.target.value),required:!0})]}),(0,a.jsxs)("div",{className:"flex justify-between m-2 items-center space-x-2",children:[(0,a.jsx)("label",{htmlFor:"pass",children:"Password"}),(0,a.jsx)("input",{className:"border",type:"password",id:"pass",name:"password",minLength:"8",autoComplete:"current-password",required:!0,onChange:e=>h(e.target.value)})]}),(0,a.jsx)("div",{className:"flex",children:(0,a.jsx)("input",{className:"bg-mtpurple text-white py-2 px-4 rounded-lg mx-auto my-2 font-bold disabled:opacity-60",type:"submit",value:"Sign in"})})]})})]})}},3907:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return g}});var a=r(5893),s=r(3851),n=r(7294),o=r(6154);async function l(){return(await o.Z.get("https://capstone-inventory-controller.ue.r.appspot.com/inventory/")).data}var i=r(7366),c=r(1485);async function d(e){return(await o.Z.delete("https://capstone-inventory-controller.ue.r.appspot.com/prod_destroy/".concat(e,"/"))).data}var u=r(1676),m=r(3496);function h(){let[e,t]=(0,n.useState)([]),[r,s]=(0,n.useState)(null),[h,p]=(0,n.useState)({}),[x,f]=(0,n.useState)(null);(0,n.useEffect)(()=>{let e=async()=>{let e=await l();t(e)};return e(),()=>{}},[]),(0,n.useEffect)(()=>{null!==x&&(d(x),alert("Are you sure?"),window.location.reload())},[x]);let g=e=>{f(e.target.value)},v=async e=>{let t=(0,m.Z)();new FormData().append("quantity",r),await (0,o.Z)({method:"put",url:"https://capstone-inventory-controller.ue.r.appspot.com/prod_update/",data:h,headers:t}).then(e=>{})},j=e=>{"Enter"===e.key&&v()},y=(e,t)=>{p({id:e,quantity:t})};return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"container-fluid",children:(0,a.jsxs)("div",{className:"row",children:[(0,a.jsx)("div",{className:"col-md-2"}),e.length>0?e.map((e,t)=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"col-md-8 m-3","data-spy":"scroll",children:(0,a.jsx)(i.Z,{as:"ul",children:(0,a.jsxs)(i.Z.Item,{as:"li",className:"d-flex justify-content-between align-items-start",children:[(0,a.jsxs)("div",{className:"ms-2 me-auto",children:[(0,a.jsx)("div",{className:"fw-bold",children:e.name}),e.description]}),(0,a.jsx)("br",{}),(0,a.jsx)(u.Z.Control,{className:"w-50 text-center",size:"sm",type:"number",placeholder:e.quantity,onKeyDown:e=>j(e),onChange:t=>y(e.id,t.target.value)}),(0,a.jsx)(c.Z,{type:"button",onClick:e=>g(e),value:e.id})]})})}),(0,a.jsx)("div",{className:"col-md-2"})]})):(0,a.jsx)("p",{children:"There are no products for this customer."})]})})})}var p=r(5005),x=r(6916);function f(){let[e,t]=(0,n.useState)(!1),[r,s]=(0,n.useState)(null),[l,i]=(0,n.useState)(null),[c,d]=(0,n.useState)(null),[u,m]=(0,n.useState)(null),h=()=>t(!1),f=async e=>{let t=new FormData;t.append("name",r),t.append("description",l),t.append("quantity",c),t.append("customer",u),await (0,o.Z)({method:"post",url:"https://capstone-inventory-controller.ue.r.appspot.com/inventory/",data:t}).then(e=>{window.location.reload()})};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"container-fluid text-center",children:[(0,a.jsx)(p.Z,{variant:"primary",onClick:()=>t(!0),children:"Add a product."}),(0,a.jsxs)(x.Z,{show:e,onHide:h,children:[(0,a.jsx)(x.Z.Header,{closeButton:!0,children:(0,a.jsx)(x.Z.Title,{children:"Add a product"})}),(0,a.jsx)(x.Z.Body,{children:(0,a.jsxs)("div",{className:"container",children:[(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)("input",{type:"text",className:"form-control form-control-lg",placeholder:"Enter Product Name",name:"name",value:r,onChange:e=>s(e.target.value)})}),(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)("input",{type:"text",className:"form-control form-control-lg",placeholder:"Enter Description",name:"description",value:l,onChange:e=>i(e.target.value)})}),(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)("input",{type:"number",className:"form-control form-control-lg",placeholder:"Enter Quantity",name:"quantity",value:c,onChange:e=>d(e.target.value)})}),(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)("input",{type:"number",className:"form-control form-control-lg",placeholder:"Customer",name:"customer",value:u,onChange:e=>m(e.target.value)})})]})}),(0,a.jsxs)(x.Z.Footer,{children:[(0,a.jsx)(p.Z,{variant:"secondary",onClick:h,children:"Close"}),(0,a.jsx)(p.Z,{variant:"primary",onClick:f,children:"Save Changes"})]})]})]}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{})]})}function g(){return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"bg-light bg-darken-xl",children:[(0,a.jsx)(s.Z,{}),(0,a.jsx)(f,{}),(0,a.jsx)(h,{})]})})}},3496:function(e,t,r){"use strict";function a(){let e=JSON.parse(localStorage.getItem("user"));return e&&e.access?{Authorization:"Bearer "+e.access}:{}}r.d(t,{Z:function(){return a}})},7311:function(e,t,r){"use strict";r.d(t,{Z:function(){return c}});let a="http://127.0.0.1:8000/",s="token/refresh/";var n=r(6154),o=r(3496);let l=n.Z.create({baseURL:a});l.interceptors.response.use(e=>e,e=>{let t=e.config;if(401===e.response.status&&t.url===a+s)return window.location.href="/login/",Promise.reject(e);if("token_not_valid"===e.response.data.code&&401===e.response.status&&"Unauthorized"===e.response.statusText){let e=localStorage.getItem("user");if(e){let r=JSON.parse(atob(e.refresh.split(".")[1])),a=Math.ceil(Date.now()/1e3);if(console.log(r.exp),r.exp>a)return l.post(s,{refresh:e.refresh}).then(e=>(localStorage.setItem("user",e.data),l.defaults.headers.Authorization="Bearer "+e.data.access,t.headers.Authorization="Bearer "+e.data.access,l(t))).catch(e=>{console.log(e)});console.log("Refresh token is expired",r.exp,a),window.location.href="/login/"}else console.log("Refresh token not available."),window.location.href="/login/"}return Promise.reject(e)});var i=e=>l({...e,headers:(0,o.Z)()}).then(e=>(console.debug("Request Successful!",e),e)).catch(e=>(console.error("Request Failed:",e.config),e.response?(console.error("Status:",e.response.status),console.error("Data:",e.response.data),console.error("Headers:",e.response.headers)):console.error("Error Message:",e.message),Promise.reject(e.response||e.message)));r(1876);var c=new class{async login(e,t,r){try{let a=await i({url:"user/login/",method:"POST",data:{email:e,password:t,username:r}});if(a.data.access)return this.setToken(a)}catch(e){return e.response}}logout(){localStorage.removeItem("user")}async register(e){let{username:t,email:r,password:a,firstName:s,lastName:n,image:o}=e;try{await i({url:"user/signup/",method:"POST",data:{username:t,email:r,password:a,first_name:s,last_name:n,image:o}}),await this.login(r,a,t)}catch(e){return e.response}}setToken(e){return localStorage.setItem("user",JSON.stringify(e.data)),e.data}async refreshToken(){try{let e=JSON.parse(localStorage.getItem("user"));if(e.refresh){let t=await i({url:s,method:"POST",data:{refresh:e.refresh}});return t.data}}catch(e){return e.response}}constructor(){this.login=this.login.bind(this)}}}},function(e){e.O(0,[316,63,324,774,888,179],function(){return e(e.s=1015)}),_N_E=e.O()}]);